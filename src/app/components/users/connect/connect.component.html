<div *ngIf="!_isAuthenticated" class="row">
  <div class="col-4 mx-auto bg-faded p-3">
    <section *ngIf="!register" class="child">
      <form #formLogin="ngForm" novalidate><!-- (ngSubmit)="login(formLogin.value)" -->
        <div class="form-group">
          <div class="d-flex justify-content-between">
            <label for="pseudo">Utilisateur:</label>
            <input type="text" [(ngModel)]="user.username" name="username" minlength="3" placeholder="utilisateur" required #username="ngModel">
          </div>
          <div *ngIf="!username.valid && (username.dirty || formLogin.submitted )">
            Nom d'utilisateur requis (3 caractères minimum)
          </div>
        </div>
        <div class="form-group">
          <div class="d-flex justify-content-between">
            <label for="password">Mot de passe</label>
            <input type="password" [(ngModel)]="user.password" name="password" #password="ngModel" placeholder="mot de passe" required>
          </div>
          <div *ngIf="!password.valid && (password.dirty || formLogin.submitted )">
            Mot de passe requis
          </div>
        </div>
        <button class="mx-auto" [disabled]="!formLogin.valid" (click)="login(formLogin.value)" type="submit">Connexion</button>
        <a class="mx-auto" (click)="showReg()">Créer un compte</a>
      </form>
    </section>
    <section *ngIf="register" class="child">
      <form #formRegister="ngForm" novalidate><!-- (ngSubmit)="login(formLogin.value)" -->
        <div class="form-group">
          <div class="d-flex justify-content-between">
            <label for="pseudo">Utilisateur:</label>
            <input type="text" [(ngModel)]="user.username" name="username" minlength="3" placeholder="utilisateur" required #username="ngModel">
          </div>
          <div *ngIf="!username.valid && (username.dirty || formRegister.submitted )">
            Nom d'utilisateur requis (3 caractères minimum)
          </div>
        </div>
        <div class="form-group">
          <div class="d-flex justify-content-between">
            <label for="password">Mot de passe:</label>
            <input type="password" [(ngModel)]="user.password" name="password" #password="ngModel" placeholder="mot de passe" required>
            <!--<input type="password" name="passwordBis" placeholder="Confirmez" required> #passwordBis="ngModel" -->
          </div>
          <div *ngIf="(!password.valid && (password.dirty || formRegister.submitted))">
            Mot de passe requis
          </div>
          <!-- <div *ngIf="(passwordBis != user.password)">
            Confirmation du mot de passe incorrecte
          </div> -->
        </div>
        <div class="form-group">
          <div class="d-flex justify-content-between">
            <label for="email">Adresse e-mail:</label>
            <input type="text" [(ngModel)]="user.email" name="email" #email="ngModel" placeholder="email@xxx.xx" required>
            <!--<input type="text" name="emailBis" placeholder="Confirmez" required> #emailBis="ngModel"  -->
          </div>
          <div *ngIf="(!email.valid && (email.dirty || formRegister.submitted))">
            Adresse e-mail requise
          </div>
          <!-- <div *ngIf="(emailBis != email)">
            Confirmation de l'adresse e-mail incorrecte
          </div> -->
        </div>
        <button class="mx-auto" [disabled]="!formRegister.valid" (click)="subscribe(formRegister.value)" type="submit">Créer mon compte</button>
      </form>
    </section>
    <!-- <section *ngIf="_isAuthenticated" class="child">CONNECT {{user.username}}</section> -->
  </div>
</div>
<section *ngIf="_isAuthenticated"  class="child">
  <div>
    {{tokenjwt}}
  </div>
  <div>
    User {{user.username}} créé!
  </div>
</section>
